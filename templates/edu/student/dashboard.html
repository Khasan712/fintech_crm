{% extends 'base/dashboard_base.html' %}
{% load static %}

{% block content %}




        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">

            {% if page == 'dashboard' %}
              <div class="row">
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <a href="{% url 'student_dashboard' %}?page=book_presentation"><h3 class="mb-0">Kitob taqdimoti</h3></a>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-success ">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Jami: {{ dashboard_statistics.book_presentation_qty }} / {{ dashboard_statistics.book_presentation.total_qty }}</h6>
                    </div>
                  </div>
                </div>

                {% for project in dashboard_statistics.projects %}
                  <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-9">
                            <div class="d-flex align-items-center align-self-start">
                              <a href="{% url 'student_dashboard' %}?page=projects&group_id={{ project.group.id }}">
                                <h3 class="mb-0">Projectlar</h3>
                              </a>
                            </div>
                          </div>
                          <div class="col-3">
                            <div class="icon icon-box-success">
                              <span class="mdi mdi-arrow-top-right icon-item"></span>
                            </div>
                          </div>
                        </div>
                        <h6 class="text-muted font-weight-normal">Kurs: {{ project.group.course.name }}</h6>
                        <h6 class="text-muted font-weight-normal">Jami: {{ project.approved_projects_qty }} / {{ project.course_projects_qty }}</h6>
                      </div>
                    </div>
                  </div>
                {% endfor %}
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <h3 class="mb-0">$12.34</h3>
                            <p class="text-danger ms-2 mb-0 font-weight-medium">-2.4%</p>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-danger">
                            <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Daily Income</h6>
                    </div>
                  </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <h3 class="mb-0">$31.53</h3>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-success ">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Expense current</h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Revenue</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$32123</h2>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                          <h6 class="text-muted font-weight-normal">11.38% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-codepen text-primary ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Sales</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$45850</h2>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+8.3%</p>
                          </div>
                          <h6 class="text-muted font-weight-normal"> 9.61% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-wallet-travel text-danger ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Purchase</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$2039</h2>
                            <p class="text-danger ms-2 mb-0 font-weight-medium">-2.1% </p>
                          </div>
                          <h6 class="text-muted font-weight-normal">2.27% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-monitor text-success ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% elif page == 'group' %}
              <div class="row ">
                <div class="col-12 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card-title">Guruh: {{ group }}</h4>
                      <h4 class="card-title">Darslar</h4>
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th> O'qituvchi </th>
                              <th> Dars No </th>
                              <th> Yaratilgan sana </th>
                              <th> Boshlangan vaqt </th>
                              <th> Tugatilgan vaqt </th>
                              <th> Holati </th>
                            </tr>
                          </thead>
                          <tbody>

                            {% for lesson in lessons %}
                              <tr>
                                <td>
                                    <a href='{% url "student_dashboard" %}?page=lesson&lesson_id={{ lesson.id }}' style='text-decoration: None;'>
                                      <img src="{% static 'app/assets/images/faces/face1.jpg' %}" alt="image" />
                                      <span class="ps-2">{{ lesson.creator__first_name }}</span>
                                    </a>

                                  </td>
                                  <td> {{ lesson.lesson_number }} </td>
                                  <td> {{ lesson.created_at }} </td>
                                  <td> {{ lesson.start_time }} </td>
                                  {% if lesson.end_time is not None %}
                                    <td> {{ lesson.end_time }} </td>
                                  {% else %}
                                    <td> - </td>
                                  {% endif %}
                                  
                                  <td>
                                    {% if lesson.status == 'started' %}
                                      <div class="badge badge-outline-success">Boshlandi</div>
                                    {% elif lesson.status == 'finished' %}
                                      <div class="badge badge-outline-danger">Tugadi</div>
                                    {% endif %}
                                  </td>
                              </tr>
                            {% endfor %}

                            
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% elif page == 'lesson' %}
              <div class="row">
                <div class="col-6 grid-margin  stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card-title">Mavzu: {{ lesson.theme }}</h4>

                      <form class="form-sample">{% csrf_token %}
                        <br>

                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                              <label class="col-sm-3 col-form-label">Mavzu</label>
                              <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="{{ lesson.theme }}">
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                              <label class="col-sm-3 col-form-label">Dars haqida</label>
                              <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="{{ lesson.description }}">
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                              <label class="col-sm-3 col-form-label">O'qituvchi</label>
                              <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="{{ lesson.creator.first_name }} {{ lesson.creator.last_name }}">
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Yaratilgan sana </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="{{ lesson.created_at }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Boshlangan vaqt </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="{{ lesson.start_time }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Tugatilgan vaqt </label>
                                <div id="bloodhound" class="col-sm-9">
                                {% if lesson.end_time is not None %}
                                    <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="{{ lesson.end_time }}">
                                {% else %}
                                <input class="typeahead" disabled style="background-color: #2A3038;" type="text" placeholder="-">
                                {% endif %}
                                </div>
                            </div>
                            </div>
                        </div>
                      </form>

                    </div>
                  </div>
                </div>

                <div class="col-6 grid-margin  stretch-card">
                  <div class="card"  style="height: 500px;overflow-y: scroll;">
                    <div class="card-body">
                      <div style="display: flex; justify-content: space-between;">
                        <h4 class="card-title">Uy ishi topshirish</h4>
                        {% if deadline %}
                          <h5>Muddat: {{ deadline }}</h5>
                        {% endif %}
                      </div>
                      <div class="table-responsive">
                        <form action="" method="POST" enctype="multipart/form-data">{% csrf_token %}
                          {% if can_upload %}
                            <button type="submit" class="btn btn-primary">Saqlash</button>
                            <input type="file" multiple name="uploaded_files">
                            <input type="hidden" name="method" value="homework">
                            <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                          {% else %}
                            <button type="submit" disabled class="btn btn-primary">Saqlash</button>
                            <input type="file" disabled>
                            <input type="hidden" name="method" value="homework">
                            <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                          {% endif %}
                          <br>
                          <br>
                          <table class="table"  >
                            <thead>
                              <tr>
                                <th> nomi </th>
                                <th> Taxrirlash </th>
                                <th>O'chirish</th>
                              </tr>
                            </thead>
                            <tbody>
                              {% for homework_item in homework_items %}
                                <tr >
                                  <td> {{ homework_item.uploaded_file }} </td>
                                  {% if can_upload %}
                                    <td> 
                                      <label id="editHomeWork" data-lesson-id="{{ lesson.id }}" 
                                        class="badge badge-info editFile" onclick="editFile()" 
                                        data-id="{{ homework_item.id }}"  name="item_id" >
                                        <i class="mdi mdi-lead-pencil"></i>
                                      </label>
                                    </td>
                                    <td>
                                      <label delete-data-lesson-id="{{ lesson.id }}" 
                                        class="badge badge-danger deleteItem" onclick="deleteFile()" 
                                        delete-data-id="{{ homework_item.id }}"  name="item_id" 
                                        delete-id="deleteHomeWorkMedia"><i class="mdi mdi-delete"></i>
                                      </label>
                                    </td>
                                  {% else %}
                                    <td> 
                                      <label class="badge badge-info"><i class="mdi mdi-lead-pencil"></i></label></td>
                                    <td> <label class="badge badge-danger"><i class="mdi mdi-delete"></i></label></td>
                                  {% endif %}
                                </tr>
                              {% endfor %}
                            </tbody>
                          </table>
                          <br>
                          
                        </form>
                      </div>
                    </div>
                  </div>
                </div>



                <div class="col-6 stretch-card">
                  <div class="card">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">Mavzuga oid qo'llanmalar.</h4>
                          {% if subject_guides %}
                            <div class="table-responsive" style="height: 300px; border-bottom: 2px solid #fff;">
                              {% for subject_guide in subject_guides %}
                                {% if subject_guide.text %}
                                  <blockquote class="blockquote blockquote-primary">
                                    <p>{{ subject_guide.text }}</p>
                                  </blockquote>
                                {% endif %}
                              {% endfor %}
                            </div>
                          {% endif %}
                          
                          {% if subject_guides %}
                            <div class="table-responsive" style="height: 400px; margin-top: 30px;">
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th> nomi </th>
                                    <th style="text-align: center;">Yuklab olish</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for subject_guide in subject_guides %}
                                    {% if subject_guide.uploaded_file %} 
                                    <tr >
                                      <td> {{ subject_guide.uploaded_file.name }} </td>
                                        <td style="display: flex; justify-content: center;"> 
                                          <label id="editHomeWork"
                                            class="badge badge-primary" >
                                            <i class="mdi mdi-download"></i>
                                          </label>
                                        </td>
                                      </tr>
                                    {% endif %}
                                  {% endfor %}
                                </tbody>
                              </table>
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


                
                <div class="col-6 stretch-card">
                  <div class="card">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">Uyga vazifalar.</h4>
                          {% if subject_hometasks %}
                            <div class="table-responsive" style="height: 300px; overflow-y: scroll; border-bottom: 2px solid #fff;">
                              {% for subject_hometask_item in subject_hometasks %}
                                {% if subject_hometask_item.text %}
                                    <blockquote class="blockquote blockquote-primary">
                                      <p>{{ subject_hometask_item.text }}</p>
                                    </blockquote>
                                {% endif %}
                              {% endfor %}
                            </div>
                          {% endif %}
                          
                          {% if subject_hometasks %}
                            <div class="table-responsive">
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th> nomi </th>
                                    <th style="text-align: center;">Yuklab olish</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for subject_hometask_item in subject_hometasks %}
                                    {% if subject_hometask_item.uploaded_file %}
                                    <tr >
                                      <td> {{ subject_hometask_item.uploaded_file }} </td>
                                      <td style="display: flex; justify-content: center;"> 
                                        <label id="editHomeWork" class="badge badge-primary">
                                          <i class=" mdi mdi-download "></i>
                                        </label>
                                      </td>
                                    </tr>
                                    {% endif %}
                                  {% endfor %}
                                </tbody>
                              </table>
                              
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            
            {% elif page == 'book_presentation' %}
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div style="display: flex; justify-content: space-between;">
                      <h4 class="card-title">Kitob taqdimoti</h4>
                      <button class="btn btn-primary add-book-presentation" id="add-book-presentation" onclick="addBookPresentation()">Qo'shish</button>
                    </div>
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Kitob</th>
                            <th>Yaratilgan sana</th>
                            <th>Holati</th>
                            <th>Tasdiqlovchi</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for book_presentation in book_presentations %}
                            <tr>
                              <td>Jacob</td>
                              <td>{{ book_presentation.book }}</td>
                              <td> {{ book_presentation.created_at }} </td>
                              {% if book_presentation.is_aproved %}
                                <td><label class="badge badge-success">Tasdiqlangan</label></td>
                              {% else %}
                                <td><label class="badge badge-danger">Tasdiqlanmagan</label></td>
                              {% endif %}

                              {% if book_presentation.approver %}
                                <td><label class="badge badge-danger">Tasdiqlanmagan</label></td>
                              {% else %}
                                <td>-</td>
                              {% endif %}
                            </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            
            {% elif page == 'projects' %}
            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <div style="display: flex; justify-content: space-between;">
                    <h4 class="card-title">Projectlar</h4>
                    <button class="btn btn-primary add-project" id="add-project" group-id="{{ projects.project_card.group.id }}" onclick="addProject()">Qo'shish</button>
                  </div>
                  <p>Jami: {{ projects.project_card.approved_projects_qty }} / {{ projects.project_card.course_projects_qty }}</p>
                  <p>Yuklandi: {{ projects.uploaded_qty }}</p>
                  <div class="table-responsive">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>File</th>
                          <th>Yuklangan sana</th>
                          <th>Ustoz</th>
                          <th style="text-align: center;">Taxrirlash</th>
                          <th style="text-align: center;">O'chirish</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for project in projects.projects %}
                          <tr>
                            <td>1</td>
                            <td>{{ project.uploaded_file }}</td>
                            <td> {{ project.created_at }} </td>
                            <td>{{ project.project_card.group.teacher.first_name }}</td>
                            <td style="text-align: center;">
                              <i class="mdi mdi-pencil edit-project" id="edit-project" edit-file-id="{{ project.id }}" onclick="editProjectBtn()" style="padding: 10px 15px; border-radius: 5px; color: #fff; background-color: rgb(255, 187, 0); font-size: 20px;"></i>
                            </td>
                            <td style="text-align: center;">
                              <i class="mdi mdi-delete delete-project" id="delete-project" edit-file-id="{{ project.id }}" onclick="deleteProjectBtn()" style="padding: 10px 15px; border-radius: 5px; color: #fff; background-color: rgb(255, 8, 0); font-size: 20px;"></i>
                            </td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
            
          </div>
          <!-- content-wrapper ends -->
        </div>
        <!-- main-panel ends -->
      
      
      
      
      </div>
      <!-- page-body-wrapper ends -->
    </div>

    {% endblock content %}