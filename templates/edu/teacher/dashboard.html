{% extends 'base/dashboard_base.html' %}
{% load static %}

{% block content %}




        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">

            {% if page == 'dashboard' %}
              <div class="row">
                {% for group_statistic in dashboard_statistics.group_statistics %}
                  <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <h4 class="mb-3">{{ group_statistic.name }}</h4>
                        <h5 class="text-muted font-weight-normal">O'quvchilar soni - {{ group_statistic.students_qty }}</h5>
                        <div style="display: flex; justify-content: space-between;">
                          <h5 class="text-muted font-weight-normal">Kunlari: </h5>
                          {% if group_statistic.monday %}
                            <p>Dushanba</p>
                          {% endif %}
                          {% if group_statistic.tuesday %}
                            <p>Seshanba</p>
                          {% endif %}
                          {% if group_statistic.wednesday %}
                            <p>Chorshanba</p>
                          {% endif %}
                          {% if group_statistic.thursday %}
                            <p>Payshanba</p>
                          {% endif %}
                          {% if group_statistic.friday %}
                            <p>Juma</p>
                          {% endif %}
                          {% if group_statistic.saturday %}
                            <p>Shanba</p>
                          {% endif %}
                          {% if group_statistic.sunday %}
                            <p>Yakshanba</p>
                          {% endif %}
                        </div>
                        <div style="display: flex;">
                          <h5 class="text-muted font-weight-normal">Soat: </h5>
                          <p style="margin-left: 10px;"> {{ group_statistic.start_time }} - {{ group_statistic.end_time }}</p>
                        </div>
                          
                      </div>
                    </div>
                  </div>
                {% endfor %}
              </div>
              <!-- <div class="row">
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Revenue</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$32123</h2>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                          <h6 class="text-muted font-weight-normal">11.38% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-codepen text-primary ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Sales</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$45850</h2>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+8.3%</p>
                          </div>
                          <h6 class="text-muted font-weight-normal"> 9.61% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-wallet-travel text-danger ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Purchase</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$2039</h2>
                            <p class="text-danger ms-2 mb-0 font-weight-medium">-2.1% </p>
                          </div>
                          <h6 class="text-muted font-weight-normal">2.27% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-monitor text-success ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
            {% elif page == 'group' %}
                <div class="row ">
                <div class="col-12 grid-margin">
                    <div class="card">
                    <div class="card-body">
                        <div style="display: flex; justify-content: space-between;">
                        <h4 class="card-title">Guruh: {{ group.name }}</h4>
                        <div>
                          <a href="{% url 'teacher_dashboard' %}?page=exams&group_id={{ group.id }}">
                              <button type="button" class="btn btn-info btn-fw">Imtixonlar</button>
                          </a>
                          <a href="{% url 'teacher_dashboard' %}?page=group_students&group_id={{ group.id }}">
                            <button type="button" class="btn btn-secondary btn-fw">O'quvchilar</button>
                          </a>
                          <button type="submit" id="addBtn" onclick="openBtn()" class="btn btn-primary btn-fw">+ Dars qo'shish</button>
                        </div>
                        </div>
                        <h4 class="card-title">Darslar</h4>
                        <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                              <th> O'qituvchi </th>
                              <th> Dars No </th>
                              <th> Yaratilgan sana </th>
                              <th> Boshlangan vaqt </th>
                              <th> Tugatilgan vaqt </th>
                              <th> Holati </th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for lesson in lessons %}
                                <tr>
                                <td>
                                    <a href='{% url "teacher_dashboard" %}?page=lesson&lesson_id={{ lesson.id }}' style='text-decoration: None;'>
                                        <img src="{% static 'app/assets/images/faces/face1.jpg' %}" alt="image" />
                                        <span class="ps-2">{{ lesson.creator__first_name }}</span>
                                    </a>

                                    </td>
                                    <td> {{ lesson.lesson_number }} </td>
                                    <td> {{ lesson.created_at }} </td>
                                    <td> {{ lesson.start_time }} </td>
                                    {% if lesson.end_time is not None %}
                                    <td> {{ lesson.end_time }} </td>
                                    {% else %}
                                    <td> - </td>
                                    {% endif %}
                                    
                                    <td>
                                    {% if lesson.status == 'started' %}
                                        <div class="badge badge-outline-success">Boshlandi</div>
                                    {% elif lesson.status == 'finished' %}
                                        <div class="badge badge-outline-danger">Tugadi</div>
                                    {% endif %}
                                    </td>
                                </tr>
                            {% endfor %}

                            
                            </tbody>
                        </table>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
            {% elif page == 'group_students' %}
                <div class="row ">
                    <div class="col-12 grid-margin">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Guruh: {{ group.name }}</h4>
                                <h4 class="card-title">O'quvchilar ro'yhati</h4>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th> Ism </th>
                                                    <th> Familiyasi </th>
                                                    <th> Qo'shilgan dars </th>
                                                    <th> Loyihalar </th>
                                                    <th> Haftalik baho </th>
                                                    <th> O'qish turi </th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                              {% for student in students %}
                                                <tr>
                                                    <td>
                                                        <!-- <img src="{% static 'app/assets/images/faces/face1.jpg' %}" alt="image" /> -->
                                                        <span class="ps-2">{{ student.student.first_name }}</span>
                                                    </td>
                                                    <td> {{ student.student.last_name }} </td>
                                                    <td> {{ student.student_first_lesson.lesson_number }} - dars</td>
                                                    {% if student.uploaded_file_qty %}
                                                      <td><a href="{% url 'teacher_dashboard' %}?page=student_projects&group_id={{ group.id }}&student_id={{ student.student.id }}">Yuklandi - {{ student.uploaded_file_qty }} | Tasdiqlandi - {{ student.accepted_project_qty }}</a></td>
                                                    {% else %}
                                                      <td> Yuklandi - {{ student.uploaded_file_qty }} | Tasdiqlandi - {{ student.accepted_project_qty }}</td>
                                                    {% endif %}
                                                    <td> {{ student.weekly_point }} </td>
                                                    <td> {{ student.student.student_type }} </td>
                                                    <td>
                                                    {% if lesson.status == 'started' %}
                                                        <div class="badge badge-outline-success">Boshlandi</div>
                                                        {% elif lesson.status == 'finished' %}
                                                            <div class="badge badge-outline-danger">Tugadi</div>
                                                    {% endif %}
                                                    </td>
                                                </tr>
                                              {% endfor %}

                                            
                                            </tbody>
                                        </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% elif page == 'lesson' %}
              <div class="row">
                <div class="col-7 grid-margin  stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card-title">Mavzu: {{ lesson.theme }}</h4>
                      <form class="form-sample" method="POST">{% csrf_token %}
                        <br>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Mavzu</label>
                                <div class="col-sm-9">
                                  <input type="text" name="theme" class="form-control" value="{{ lesson.theme }}" style="color: white;" />
                                </div>
                              </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Dars haqida</label>
                                <div class="col-sm-9">
                                  <input type="text" name="description" class="form-control" value="{{ lesson.description }}" style="color: white;" />
                                </div>
                              </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">O'qituvchi</label>
                                <div id="bloodhound" class="col-sm-9">
                                  <input class="typeahead" type="text" placeholder="{{ lesson.creator.first_name }} {{ lesson.creator.last_name }}">
                                </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Yaratilgan sana </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" type="text" placeholder="{{ lesson.created_at }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Boshlangan vaqt </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" type="text" placeholder="{{ lesson.start_time }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Tugatilgan vaqt </label>
                                <div id="bloodhound" class="col-sm-9">
                                {% if lesson.end_time is not None %}
                                    <input class="typeahead" type="text" placeholder="{{ lesson.end_time }}">
                                {% else %}
                                <input class="typeahead" type="text" placeholder="-">
                                {% endif %}
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                              <div class="form-group row">
                                  <label class="col-sm-3 col-form-label">Dars Holati </label>
                                  <div id="bloodhound" class="col-sm-9">
                                  {% if lesson.status == 'started' %}
                                      <div class="badge badge-outline-success">Boshlandi</div>
                                  {% elif lesson.status == 'finished' %}
                                      <div class="badge badge-outline-danger">Tugadi</div>
                                  {% endif %}
                                  </div>
                              </div>
                            </div>
                        </div>
                        {% if lesson.status == 'started' %}
                          <div class="row">
                            <div class="col-md-12">
                              <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Darsni tugatish </label>
                                <div id="bloodhound" class="col-sm-9">
                                  <div class="form-check form-check-success">
                                    <label class="form-check-label">
                                    <input type="checkbox" name="status" value="finished" class="form-check-input"></label>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        {% endif %}
                        <button type="submit" class="btn btn-primary">Saqlash</button>
                        <input type="hidden" name="method" value="update_lesson">
                        <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                      </form>
                    </div>
                  </div>
                </div>
                <div class="col-5 grid-margin  stretch-card">
                  <div class="card">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">O'quvchilar</h4>
                          <div class="table-responsive">
                            <form action="" method="POST" id="createAttendance">{% csrf_token %}
                              <table class="table"  >
                                <thead>
                                  <tr>
                                    <th> Ismi Familiyasi </th>
                                    <th style="text-align: center;">Davomat</th>
                                    <th style="text-align: center;">Baho</th>
                                    <th> O'qish turi </th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for student in students %}
                                    <tr>
                                      <td>
                                        <img src="" alt="?" />
                                        <span class="ps-2"><a href="{% url 'teacher_dashboard' %}?page=student_in_lesson&lesson_id={{ lesson.id }}&student_id={{ student.student__id }}">{{ student.student__first_name }} {{ student.student__last_name }}</a></span>
                                      </td>
                                      <input type="hidden" name="students_id" id="student_id" value="{{student.student__id}}"/>
                                      <td>
                                        <div class="form-group">
                                          {% if lesson.status == 'started' %}
                                            <select name="iscome" class="form-control form-control-sm" style="color: #fff;" id="exampleFormControlSelect3">
                                              {% if student.is_come %}
                                                <option value="True" selected style="background-color: green;">Keldi</option>
                                                <option value="False">Kelmadi</option>
                                              {% else %}
                                                <option value="False" selected >Kelmadi</option>
                                                <option value="True" >Keldi</option>
                                              {% endif %}
                                            </select>
                                          {% else %}
                                              {% if student.is_come %}
                                                <p style="background-color: green; padding: 10px 0; color: white; text-align: center; border-radius: 5px;">Keldi</p>
                                              {% else %}
                                                <p style="background-color: red; padding: 10px 0; color: white; text-align: center; border-radius: 5px;">Kelmadi</p>
                                              {% endif %}
                                          {% endif %}
                                        </div>
                                      </td>
                                      <td> 
                                        <div class="form-group">
                                          {% if lesson.status == 'started' %}
                                            <select name="h_w_percentage" class="form-control form-control-sm" style="color: #fff;" id="exampleFormControlSelect3">
                                              <option value="{{ student.h_m_percentage }}" selected >{{ student.h_m_percentage }}</option>
                                              <option value="1" >1</option>
                                              <option value="2" >2</option>
                                              <option value="3" >3</option>
                                              <option value="4" >4</option>
                                              <option value="5" >5</option>
                                              <option value="6" >6</option>
                                              <option value="7" >7</option>
                                              <option value="8" >8</option>
                                              <option value="9" >9</option>
                                              <option value="10" >10</option>
                                            </select>
                                          {% else %}
                                            <p style="background-color: #3b4046; width: 40px; padding: 10px; color: white; border-radius: 5px; text-align: center; position: relative; left: 20px;">{{ student.h_m_percentage }}</p>
                                          {% endif %}

                                        </div>
                                      </td> 
                                      {% if student.student__student_type == 'online' %}
                                        <td> <label class="badge badge-danger">Online</label></td>
                                      {% elif student.student__student_type == 'offline' %}
                                        <td> <label class="badge badge-info">Offline</label></td>
                                      {% endif %}
                                    </tr>
                                  {% endfor %}
                                </tbody>
                              </table>
                              <br>
                              {% if lesson.status == 'started' %}
                                <input type="hidden" name="page" value="lesson">
                                <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                                <input type="hidden" name="method" value="create_attendency">
                                <button type="submit" class="btn btn-warning btn-fw">Saqlash</button>
                              {% else %}
                                <input type="hidden" disabled name="page" value="lesson">
                                <input type="hidden" disabled name="lesson_id" value="{{ lesson.id }}">
                                <input type="hidden" disabled name="method" value="create_attendency">
                                <button type="submit" disabled class="btn btn-warning btn-fw">Saqlash</button>
                              {% endif %}
                              
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>



                <div class="col-12 grid-margin  stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card">Mavzuga oid qo'llanmalarni yuklash.</h4>
                      <form class="form-sample" method="POST" enctype="multipart/form-data">{% csrf_token %}
                        <br>
                        <div class="row">
                          <div class="col-md-12">
                              <div class="form-group row">
                                  <textarea name="text" style="background-color: #2A3038; color: white;" cols="30" rows="6"></textarea>
                              </div>
                          </div>
                        </div>
                        <input type="file" name="uploaded_file" multiple class="file-upload-default">
                        <br>
                        <br>
                        <div class="form-group row">
                          <label class="col-sm-2 col-form-label">Uyga vazifa</label>
                          <div id="bloodhound" class="col-sm-9">
                            <div class="form-check form-check-success">
                              <label class="form-check-label">
                              <input type="checkbox" name="home_task" value="true" class="form-check-input"></label>
                            </div>
                          </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Yuklash</button>
                        <input type="hidden" name="method" value="subject_guides">
                        <input type="hidden" name="page" value="lesson">
                        <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                      </form>
                    </div>
                  </div>
                </div>


                <div class="col-6 grid-margin  stretch-card">
                  <div class="card">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">Mavzuga oid qo'llanmalar.</h4>
                          
                          {% if subject_guides %}
                          <div class="table-responsive" style="height: 300px; overflow-y: scroll; border-bottom: 2px solid #fff;">
                            {% for subject_guide in subject_guides %}
                              {% if subject_guide.text %}
                                <form action=""  method="POST" id='edit_guides_and_tasks'>{% csrf_token %}
                                  <blockquote class="blockquote blockquote-primary">
                                    <textarea name="text" cols="53" rows="3" style="background-color: #2A3038; width: auto; color: white;">{{ subject_guide.text }}</textarea>
                                    <br>
                                    <button 
                                      type="button" class="btn btn-warning btn-icon editGuideOrTaskText"
                                      updated-guide-or-task-id="{{ subject_guide.id }}" 
                                      onclick="editGuideOrTaskTextOpen()" id="editGuideOrTaskTextID"
                                    >
                                      <div class="col-sm-6 col-md-4 col-lg-3">
                                        <i class="mdi mdi-pencil"></i>
                                      </div>
                                    </button>
                                    <button 
                                    type="button" class="btn btn-danger btn-icon deleteGuideOrTaskText"
                                    delete-guide-or-task-id="{{ subject_guide.id }}"
                                    onclick="deleteGuideOrTaskTextOpen()" id="deleteGuideOrTaskTextID"
                                    >
                                      <div class="col-sm-6 col-md-4 col-lg-3">
                                        <i class="mdi mdi-delete"></i>
                                      </div>
                                    </button>
                                  </blockquote>
                                  </form>
                                {% endif %}
                              {% endfor %}
                          </div>
                          {% endif %}
                          
                          {% if subject_guides %}
                            <div class="table-responsive" style="height: 400px;">
                              
                                <table class="table">
                                  <thead>
                                    <tr>
                                      <th> nomi </th>
                                      <th> Taxrirlash </th>
                                      <th>O'chirish</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    {% for subject_guide in subject_guides %}
                                      {% if subject_guide.uploaded_file %}
                                        <form action="" method="POST" enctype="multipart/form-data">{% csrf_token %}
                                          <tr >
                                            <td> {{ subject_guide.uploaded_file.name }} </td>
                                            <td> 
                                              <label
                                                class="badge badge-info editGuideOrTaskFile" onclick="editGuideOrTaskFileOpen()"
                                                updated-guide-or-task-id="{{ subject_guide.id }}" id="editGuideOrTaskFileID"
                                                >
                                                <i class="mdi mdi-lead-pencil"></i>
                                              </label>
                                            </td> 
                                            <td>
                                              <label
                                                class="badge badge-danger deleteGuideOrTaskFile" onclick="deleteGuideOrTaskFileOpen()"
                                                delete-guide-or-task-id="{{ subject_guide.id }}" id="deleteGuideOrTaskTextID" 
                                                ><i class="mdi mdi-delete"></i>
                                              </label>
                                            </td>
                                          </tr>
                                        </form>
                                      {% endif %}
                                    {% endfor %}
                                  </tbody>
                                </table>
                              
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


                
                <div class="col-6 grid-margin  stretch-card">
                  <div class="card">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">Uyga vazifalar.</h4>

                          <div class="table-responsive" style="height: 300px; overflow-y: scroll; border-bottom: 2px solid #fff;">
                            {% for subject_hometask_item in subject_hometasks %}
                              {% if subject_hometask_item.text %}
                                <form action="" method="POST" id='edit_or_delete_guide_text'>{% csrf_token %}
                                  <blockquote class="blockquote blockquote-primary">
                                    <textarea class="edit_guide_task_text_input" id="" cols="53" rows="3" style="background-color: #2A3038; width: auto; color: white;">{{ subject_hometask_item.text }}</textarea>
                                    <button 
                                      type="button" class="btn btn-warning btn-icon editGuideOrTaskText"
                                      updated-guide-or-task-id="{{ subject_hometask_item.id }}" 
                                      onclick="editGuideOrTaskTextOpen()" id="editGuideOrTaskTextID"
                                    >
                                      <div class="col-sm-6 col-md-4 col-lg-3">
                                        <i class="mdi mdi-pencil"></i>
                                      </div>
                                    </button>
                                    <button 
                                    type="button" class="btn btn-danger btn-icon deleteGuideOrTaskText"
                                    delete-guide-or-task-id="{{ subject_hometask_item.id }}"
                                    onclick="deleteGuideOrTaskTextOpen()" id="deleteGuideOrTaskTextID"
                                    >
                                      <div class="col-sm-6 col-md-4 col-lg-3">
                                        <i class="mdi mdi-delete"></i>
                                      </div>
                                    </button>
                                  </blockquote>
                                </form>
                              {% endif %}
                            {% endfor %}
                          </div>
                          
                          {% if subject_hometasks %}
                            <div class="table-responsive" style="height: 400px;">
                              <form action="" method="POST" enctype="multipart/form-data">{% csrf_token %}
                                <table class="table">
                                  <thead>
                                    <tr>
                                      <th> nomi </th>
                                      <th style="text-align: center;"> Taxrirlash </th>
                                      <th style="text-align: center;">O'chirish</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    {% for subject_hometask_item in subject_hometasks %}
                                      {% if subject_hometask_item.uploaded_file %}
                                      <tr >
                                        <td> {{ subject_hometask_item.uploaded_file }} </td>
                                        <td style="text-align: center;"> 
                                          <label
                                            class="badge badge-info editGuideOrTaskFile" onclick="editGuideOrTaskFileOpen()" 
                                            updated-guide-or-task-id="{{ subject_hometask_item.id }}" id="editGuideOrTaskFileID"
                                            >
                                            <i class="mdi mdi-lead-pencil"></i>
                                          </label>
                                        </td>
                                        <td style="text-align: center;">
                                          <label class="badge badge-danger deleteGuideOrTaskFile"
                                            delete-guide-or-task-id="{{ subject_hometask_item.id }}"
                                            id="deleteGuideOrTaskTextID" onclick="deleteGuideOrTaskFileOpen()"
                                            > 
                                            <i class="mdi mdi-delete"></i>
                                          </label>
                                        </td>
                                      </tr>
                                      {% endif %}
                                    {% endfor %}
                                  </tbody>
                                </table>
                              </form>
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


              </div>

            {% elif page == 'student_in_lesson' %}
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">O'quvchi: <span style="font-weight: 0; color: #72b1ff;">{{ student.first_name }} {{ student.last_name }}</span></h4>
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>Uy ishi</th>
                            <th>Yuklab olish</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for homework_item in homework_items %}
                          <tr>
                            <td class="text-info"> {{ homework_item.uploaded_file.name }} </td>
                            <td><a target="_blank" href="{{ homework_item.uploaded_file.url }}"><label style="cursor: pointer;" class="badge badge-danger">Ko'rish</label></a></td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            
            {% elif page == 'student_projects' %}
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <form method="POST">{% csrf_token %}
                    <input type="hidden" name="method" value="give_status_to_proj">
                    <input type="hidden" name="student_id" value="{{ student.id }}">
                    <input type="hidden" name="group_id" value="{{ group_id }}">
                  
                    <div class="card-body">
                      <h3>O'quvchi: {{ student.first_name }} {{ student.last_name }}</h3>
                      <br>
                      <div style="display: flex; justify-content: space-between;">
                        <h4 class="card-title">Projectlar</h4>
                        <p>Yuklandi: {{ projects_statistics.uploaded_proj_qty }}</p>
                        <p>Tasdiqlandi: {{ projects_statistics.accepted_proj_qty }} / {{ projects_statistics.course_projects_qty }}</p>
                        <p>Jarayonda: {{ projects_statistics.in_progress_proj_qty }}</p>
                        <p>Rad etilganlar: {{ projects_statistics.rejected_proj_qty }}</p>
                        <button class="btn btn-primary" type="submit">Saqlash</button>
                      </div>
                      
                      <div class="table-responsive">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>
                                <p>#</p>
                              </th>
                              <th>
                                <p>Nomi</p>
                              </th>
                              <th>
                                <p>File</p>
                              </th>
                              <th>
                                <p>GitHub</p>
                              </th>
                              <th>
                                <p>Netlify</p>
                              </th>
                              <th>
                                <p>Yuklangan sana</p>
                              </th>
                              <th>
                                <p>Holati</p>
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for project in projects %}
                              <tr>
                                <td>
                                  <p style="margin-bottom: 0;">#</p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ project.name }}</p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;"><a href="{{ project.uploaded_file.url }}" target="_blank">Ko'rish</a=></p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;"><a href="{{ project.github_link }}" target="_blank">GitHub</a=></p>
                                </td>
                                <td>
                                  {% if project.netlify_link %}
                                    <p style="margin-bottom: 0;"><a href="{{ project.netlify_link }}" target="_blank">Netlify</a></p>
                                  {% else %}
                                    <p style="margin-bottom: 0;">-</p>
                                  {% endif %}
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ project.created_at }}</p>
                                </td>
                                <input type="hidden" name="item_id" value="{{ project.id }}">
                                <td>
                                  <select name="status">
                                      {% if project.status == 'in_progress' %}
                                        <option value="in_progress" selected>Jarayonda</option>
                                        <option value="accepted">Qabul qilindi</option>
                                        <option value="rejected">Rad etildi</option>
                                      {% elif project.status == 'accepted' %}
                                        <option value="accepted" selected>Qabul qilindi</option>
                                        <option value="in_progress">Jarayonda</option>
                                        <option value="rejected">Rad etildi</option>
                                      {% else %}
                                        <option value="rejected" selected>Rad etildi</option>
                                        <option value="in_progress">Jarayonda</option>
                                        <option value="accepted">Qabul qilindi</option>
                                      {% endif %}
                                    </select>
                                </td>
                              </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>

                  </form>
                </div>
              </div>
            {% elif page == 'exams' %}
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <input group-id="{{ group.id }}" value="Imtixon qo'shish"  class="btn btn-primary addExam" style="padding: 8px 0;" onclick="addExamBtn()" id="addExam">
                  <form method="POST">{% csrf_token %}
                    <input type="hidden" name="group_id" value="{{ group_id }}">
                    <div class="card-body">
                      <div style="display: flex; justify-content: space-between;">
                        <h3>Guruh: {{ group.name }}</h3>
                      </div>
                      <h4 class="card-title">Imtixonlar</h4>
                      <br>
                      
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead>
                            <tr style="text-align: center;">
                              <th>
                                <p>#</p>
                              </th>
                              <th>
                                <p>Imtixon</p>
                              </th>
                              <th>
                                <p>Qo'shilgan sana</p>
                              </th>
                              <th>
                                <p>Tugash vaqti</p>
                              </th>
                              <th>
                                <p>O'quvchilar soni</p>
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for exam in exams %}
                              <tr style="text-align: center;">
                                <td>
                                  <p style="margin-bottom: 0;">#</p>
                                </td>
                                <td>
                                  <a href="{% url 'teacher_dashboard' %}?page=exam&exam_id={{ exam.id }}&group_id={{ group.id }}">
                                    <p style="margin-bottom: 0;">{{ exam.name }}</p>
                                  </a>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ exam.created_at }}</p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ exam.deadline }}</p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ exam.students_qty }}</p>
                                </td>
                              </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>

                  </form>
                </div>
              </div>
            {% elif page == 'exam' %}
              <div class="row">
                <div class="col-7 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card-title">Imtixon: {{ exam.name }}</h4>
                      <form class="form-sample" method="POST">{% csrf_token %}
                        <br>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Guruh</label>
                                <div id="bloodhound" class="col-sm-9">
                                  <input class="typeahead text-dark" disabled type="text" placeholder="{{ exam.group.name }}">
                                </div>
                              </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Imtixon oluvchi</label>
                                <div id="bloodhound" class="col-sm-9">
                                  <input class="typeahead text-dark" disabled type="text" placeholder="{{ exam.group.teacher.first_name }} {{ exam.group.teacher.last_name }}">
                                </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Yaratilgan sana </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead text-dark" disabled type="text" placeholder="{{ exam.created_at }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Tugash vaqti </label>
                                <div id="bloodhound" class="col-sm-9">
                                  <input class="typeahead text-light" type="datetime-local" name="deadline" value="{{ exam.get_formated_deadline }}">
                                </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                              <label class="col-sm-3 col-form-label">Imtixon</label>
                              <div class="col-sm-9">
                                <input type="text" name="name" class="form-control text-light" value="{{ exam.name }}" />
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                              <label class="col-sm-3 col-form-label">Batafsil</label>
                              <div class="col-sm-9">
                                <textarea name="description" style="background-color: #2A3038; padding: 10px;" id="" cols="68" rows="7" class="custom-textarea text-light" >{{ exam.description }}</textarea>
                              </div>
                            </div>
                          </div>
                        </div>
                          <input type="hidden" name="method" value="edit_exam">
                          <input type="hidden" name="exam_id" value="{{ exam.id }}">
                          <input type="hidden" name="group_id" value="{{ group_id }}">
                          <button type="submit" class="btn btn-primary">Saqlash</button>
                      </form>
                      <button onclick="deleteExamBtn()" exam-id="{{ exam.id }}" group-id="{{ group_id }}" class="btn btn-danger deleteExam" id="deleteExam" style="position: relative; bottom: 50px; left: 83%;">O'chirish</button>
                    </div>
                  </div>
                </div>
                <div class="col-5 grid-margin">
                  <div class="card" style="height: 700px; overflow-y: scroll;">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">O'quvchilar</h4>
                          <div class="table-responsive">
                            <form action="" method="POST" id="createAttendance">{% csrf_token %}
                              <table class="table"  >
                                <thead>
                                  <tr>
                                    <th> Ismi Familiyasi </th>
                                    <th style="text-align: center;">Yuklandi</th>
                                    <th style="text-align: center;">Tasdiqlandi</th>
                                    <th> O'qish turi </th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for student in students %}
                                    <tr>
                                      <td>
                                        <img src="" alt="?" />
                                        <span class="ps-2"><a href="{% url 'teacher_dashboard' %}?page=student_in_exam&exam_id={{ exam.id }}&student_id={{ student.id }}">{{ student.first_name }} {{ student.last_name }}</a></span>
                                      </td>
                                      <td style="text-align: center;">
                                        <p>{{ student.uploaded_files_qty }}</p>
                                      </td>
                                      <td style="text-align: center;">
                                        <p>{{ student.accepted_files_qty }}</p>
                                      </td> 
                                      {% if student.student_type == 'online' %}
                                        <td> <label class="badge badge-danger">Online</label></td>
                                      {% elif student.student_type == 'offline' %}
                                        <td> <label class="badge badge-info">Offline</label></td>
                                      {% endif %}
                                    </tr>
                                  {% endfor %}
                                </tbody>
                              </table>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-12 grid-margin stretch-card">
                  <div class="card">
                    <form method="POST">{% csrf_token %}
                      <input type="hidden" name="method" value="check_exam">
                      <input type="hidden" name="student_id" value="{{ student.id }}">
                      <input type="hidden" name="exam_id" value="{{ exam_card.exam.id }}">
                    
                      <div class="card-body">
                        <div style="display: flex; justify-content: space-between;">
                          <h3>Imtixonga oid yuklamalar</h3>
                          <input class="btn btn-primary addExamItem" id="addExamItemID" value="Qo'shish" type="button" style="padding: 18px 45px;" onclick="addExamItemOpen()">
                        </div>
                        <br>                        
                        <br>                        
                        <div class="table-responsive" style="overflow-y: scroll; height: 600px;">
                          <table class="table table-hover table-bordered">
                            <thead>
                              <tr>
                                <th>
                                  <p>#</p>
                                </th>
                                <th>
                                  <p>Nomi</p>
                                </th>
                                <th>
                                  <p>Yuklama</p>
                                </th>
                                <th>
                                  <p>Havola</p>
                                </th>
                                <th>
                                  <p>Yuklandi</p>
                                </th>
                                <th>
                                  <p>O'zgartirish</p>
                                </th>
                                <th>
                                  <p>O'chirish</p>
                                </th>
                              </tr>
                            </thead>
                            <tbody>
                              {% for exam_item in exam_items %}
                                <tr>
                                  <td>
                                    <p style="margin-bottom: 0;">#</p>
                                  </td>
                                  <td>
                                    <p style="margin-bottom: 0;">{{ exam_item.name }}</p>
                                  </td>
                                  <td>
                                    {% if exam_item.uploaded_file %}
                                      <p style="margin-bottom: 0;"><a href="{{ exam_item.uploaded_file.url }}" target="_blank">Kirish</a></p>
                                    {% else %}
                                      <p>-</p>
                                    {% endif %}
                                  </td>
                                  <td>
                                    {% if exam_item.url_address %}
                                      <p style="margin-bottom: 0;"><a href="{{ exam_item.url_address }}" target="_blank">Kirish</a></p>
                                    {% else %}
                                      <p>-</p>
                                    {% endif %}
                                  </td>
                                  <td>
                                    <p style="margin-bottom: 0;">{{ exam_item.created_at }}</p>
                                  </td>
                                  <td> 
                                    <label class="badge badge-info editExamItem" onclick="editExamItemOpen()" 
                                      id="editExamItemID" item-name="{{ exam_item.name }}" item-id="{{ exam_item.id }}"
                                      item-uploaded-file="{{ exam_item.uploaded_file.name }}" item-url-address="{{ exam_item.url_address }}"
                                    > 
                                      <i class="mdi mdi-lead-pencil"></i>
                                    </label>
                                  </td>
                                  <td>
                                    <label class="badge badge-danger deleteExamItem" onclick="deleteExamItemOpen()" 
                                      id="deleteExamItemID" item-id="{{ exam_item.id }}"
                                    >
                                      <i class="mdi mdi-delete"></i>
                                    </label>
                                  </td>
                                </tr>
                              {% endfor %}
                            </tbody>
                          </table>
                        </div>
                      </div>
  
                    </form>
                  </div>
                </div>
              </div>
            {% elif page == 'student_in_exam' %}
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <form method="POST">{% csrf_token %}
                    <input type="hidden" name="method" value="check_exam">
                    <input type="hidden" name="student_id" value="{{ student.id }}">
                    <input type="hidden" name="exam_id" value="{{ exam_card.exam.id }}">
                  
                    <div class="card-body">
                      <h3>O'quvchi: {{ student.first_name }} {{ student.last_name }}</h3>
                      <br>
                      <div style="display: flex; justify-content: space-between;">
                        <h4 class="card-title">Yuklamalar</h4>
                        <p>Yuklandi: {{ exam_card.uploaded_files_qty }}</p>
                        <p>Tasdiqlandi: {{ exam_card.accepted_files_qty }}</p>
                        <p>Jarayonda: {{ exam_card.in_progress_files_qty }}</p>
                        <p>Rad etilganlar: {{ exam_card.rejected_files_qty }}</p>
                        <button type='submit' class="btn btn-primary" type="submit">Saqlash</button>
                      </div>
                      
                      <div class="table-responsive">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>
                                <p>#</p>
                              </th>
                              <th>
                                <p>Nomi</p>
                              </th>
                              <th>
                                <p>File</p>
                              </th>
                              <th>
                                <p>GitHub</p>
                              </th>
                              <th>
                                <p>Netlify</p>
                              </th>
                              <th>
                                <p>Yuklangan sana</p>
                              </th>
                              <th>
                                <p>Holati</p>
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for project in uploaded_files %}
                              <tr>
                                <td>
                                  <p style="margin-bottom: 0;">#</p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ project.name }}</p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;"><a href="{{ project.uploaded_file.url }}" target="_blank">Ko'rish</a=></p>
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;"><a href="{{ project.github_link }}" target="_blank">GitHub</a=></p>
                                </td>
                                <td>
                                  {% if project.netlify_link %}
                                    <p style="margin-bottom: 0;"><a href="{{ project.netlify_link }}" target="_blank">Netlify</a></p>
                                  {% else %}
                                    <p style="margin-bottom: 0;">-</p>
                                  {% endif %}
                                </td>
                                <td>
                                  <p style="margin-bottom: 0;">{{ project.created_at }}</p>
                                </td>
                                <input type="hidden" name="item_id" value="{{ project.id }}">
                                <td>
                                  <select name="status">
                                      {% if project.status == 'in_progress' %}
                                        <option value="in_progress" selected>Jarayonda</option>
                                        <option value="accepted">Qabul qilindi</option>
                                        <option value="rejected">Rad etildi</option>
                                      {% elif project.status == 'accepted' %}
                                        <option value="accepted" selected>Qabul qilindi</option>
                                        <option value="in_progress">Jarayonda</option>
                                        <option value="rejected">Rad etildi</option>
                                      {% else %}
                                        <option value="rejected" selected>Rad etildi</option>
                                        <option value="in_progress">Jarayonda</option>
                                        <option value="accepted">Qabul qilindi</option>
                                      {% endif %}
                                    </select>
                                </td>
                              </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>

                  </form>
                </div>
              </div>
            {% endif %}
            
          </div>
          <!-- content-wrapper ends -->
        </div>
        <!-- main-panel ends -->
      
      
      
      
      </div>
      <!-- page-body-wrapper ends -->
    </div>

    {% endblock content %}