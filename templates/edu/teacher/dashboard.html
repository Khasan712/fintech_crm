{% extends 'base/dashboard_base.html' %}
{% load static %}

{% block content %}




        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">

            {% if page == 'dashboard' %}
              <div class="row">
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <h3 class="mb-0">$12.34</h3>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-success ">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Potential growth</h6>
                    </div>
                  </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <h3 class="mb-0">$17.34</h3>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+11%</p>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-success">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Revenue current</h6>
                    </div>
                  </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <h3 class="mb-0">$12.34</h3>
                            <p class="text-danger ms-2 mb-0 font-weight-medium">-2.4%</p>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-danger">
                            <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Daily Income</h6>
                    </div>
                  </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-9">
                          <div class="d-flex align-items-center align-self-start">
                            <h3 class="mb-0">$31.53</h3>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                        </div>
                        <div class="col-3">
                          <div class="icon icon-box-success ">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                          </div>
                        </div>
                      </div>
                      <h6 class="text-muted font-weight-normal">Expense current</h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Revenue</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$32123</h2>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                          <h6 class="text-muted font-weight-normal">11.38% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-codepen text-primary ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Sales</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$45850</h2>
                            <p class="text-success ms-2 mb-0 font-weight-medium">+8.3%</p>
                          </div>
                          <h6 class="text-muted font-weight-normal"> 9.61% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-wallet-travel text-danger ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4 grid-margin">
                  <div class="card">
                    <div class="card-body">
                      <h5>Purchase</h5>
                      <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">$2039</h2>
                            <p class="text-danger ms-2 mb-0 font-weight-medium">-2.1% </p>
                          </div>
                          <h6 class="text-muted font-weight-normal">2.27% Since last month</h6>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-monitor text-success ms-auto"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% elif page == 'group' %}
                <div class="row ">
                <div class="col-12 grid-margin">
                    <div class="card">
                    <div class="card-body">
                        <div style="display: flex; justify-content: space-between;">
                        <h4 class="card-title">Guruh: {{ group.name }}</h4>
                        <div>
                          <a href="{% url 'teacher_dashboard' %}?page=group_students&group_id={{ group.id }}">
                              <button type="button" class="btn btn-secondary btn-fw">O'quvchilar</button>
                          </a>
                          <button type="submit" id="addBtn" onclick="openBtn()" class="btn btn-primary btn-fw">+ Dars qo'shish</button>
                        </div>
                        </div>
                        <h4 class="card-title">Darslar</h4>
                        <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th> O'qituvchi </th>
                                <th> Dars No </th>
                                <th> Yaratilgan sana </th>
                                <th> Boshlangan vaqt </th>
                                <th> Tugatilgan vaqt </th>
                                <th> Holati </th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for lesson in lessons %}
                                <tr>
                                <td>
                                    <a href='{% url "teacher_dashboard" %}?page=lesson&lesson_id={{ lesson.id }}' style='text-decoration: None;'>
                                        <img src="{% static 'app/assets/images/faces/face1.jpg' %}" alt="image" />
                                        <span class="ps-2">{{ lesson.creator__first_name }}</span>
                                    </a>

                                    </td>
                                    <td> {{ lesson.lesson_number }} </td>
                                    <td> {{ lesson.created_at }} </td>
                                    <td> {{ lesson.start_time }} </td>
                                    {% if lesson.end_time is not None %}
                                    <td> {{ lesson.end_time }} </td>
                                    {% else %}
                                    <td> - </td>
                                    {% endif %}
                                    
                                    <td>
                                    {% if lesson.status == 'started' %}
                                        <div class="badge badge-outline-success">Boshlandi</div>
                                    {% elif lesson.status == 'finished' %}
                                        <div class="badge badge-outline-danger">Tugadi</div>
                                    {% endif %}
                                    </td>
                                </tr>
                            {% endfor %}

                            
                            </tbody>
                        </table>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
            {% elif page == 'group_students' %}
                <div class="row ">
                    <div class="col-12 grid-margin">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Guruh: {{ group.name }}</h4>
                                <h4 class="card-title">O'quvchilar ro'yhati</h4>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th> Ism </th>
                                                    <th> Familiyasi </th>
                                                    <th> Yaratilgan sana </th>
                                                    <th> Boshlangan vaqt </th>
                                                    <th> Tugatilgan vaqt </th>
                                                    <th> Holati </th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                {% for student in students %}
                                                    <tr>
                                                        <td>
                                                            <!-- <img src="{% static 'app/assets/images/faces/face1.jpg' %}" alt="image" /> -->
                                                            <span class="ps-2">{{ student.student__first_name }}</span>
                                                        </td>
                                                        <td> {{ student.student__last_name }} </td>
                                                        <td> {{ lesson.created_at }} </td>
                                                        <td> {{ lesson.start_time }} </td>
                                                        {% if lesson.end_time is not None %}
                                                        <td> {{ lesson.end_time }} </td>
                                                        {% else %}
                                                        <td> - </td>
                                                        {% endif %}
                                                        <td>
                                                        {% if lesson.status == 'started' %}
                                                            <div class="badge badge-outline-success">Boshlandi</div>
                                                            {% elif lesson.status == 'finished' %}
                                                                <div class="badge badge-outline-danger">Tugadi</div>
                                                        {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}

                                            
                                            </tbody>
                                        </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% elif page == 'lesson' %}
              <div class="row">
                <div class="col-7 grid-margin  stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card-title">Mavzu: {{ lesson.theme }}</h4>
                      <form class="form-sample" method="POST">{% csrf_token %}
                        <br>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Mavzu</label>
                                <div class="col-sm-9">
                                  <input type="text" name="theme" class="form-control" value="{{ lesson.theme }}" style="color: white;" />
                                </div>
                              </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">O'qituvchi</label>
                                <div id="bloodhound" class="col-sm-9">
                                  <input class="typeahead" type="text" placeholder="{{ lesson.creator.first_name }} {{ lesson.creator.last_name }}">
                                </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Yaratilgan sana </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" type="text" placeholder="{{ lesson.created_at }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Boshlangan vaqt </label>
                                <div id="bloodhound" class="col-sm-9">
                                <input class="typeahead" type="text" placeholder="{{ lesson.start_time }}">
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Tugatilgan vaqt </label>
                                <div id="bloodhound" class="col-sm-9">
                                {% if lesson.end_time is not None %}
                                    <input class="typeahead" type="text" placeholder="{{ lesson.end_time }}">
                                {% else %}
                                <input class="typeahead" type="text" placeholder="-">
                                {% endif %}
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                              <div class="form-group row">
                                  <label class="col-sm-3 col-form-label">Dars Holati </label>
                                  <div id="bloodhound" class="col-sm-9">
                                  {% if lesson.status == 'started' %}
                                      <div class="badge badge-outline-success">Boshlandi</div>
                                  {% elif lesson.status == 'finished' %}
                                      <div class="badge badge-outline-danger">Tugadi</div>
                                  {% endif %}
                                  </div>
                              </div>
                            </div>
                        </div>
                        {% if lesson.status == 'started' %}
                          <div class="row">
                            <div class="col-md-12">
                              <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Darsni tugatish </label>
                                <div id="bloodhound" class="col-sm-9">
                                  <div class="form-check form-check-success">
                                    <label class="form-check-label">
                                    <input type="checkbox" name="status" value="finished" class="form-check-input"></label>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        {% endif %}
                        <h4 class="card-title">Dars matni </h4>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group row">
                                    <textarea name="description"  style="background-color: #2A3038; color: white;" cols="30" rows="10">{{ lesson.description }}</textarea>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Saqlash</button>
                        <input type="hidden" name="page" value="update_lesson">
                        <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                      </form>
                    </div>
                  </div>
                </div>
                <div class="col-5 grid-margin  stretch-card">
                  <div class="card">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">Davomat</h4>
                          <div class="table-responsive">
                            <form action="" method="POST" id="createAttendance">{% csrf_token %}
                              <table class="table"  >
                                <thead>
                                  <tr>
                                    <th> Ismi </th>
                                    <th> Familiyasi </th>
                                    <th>Davomat</th>
                                    <th> Baho </th>
                                    <th> O'qish turi </th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for student in students %}
                                    <tr>
                                      <td>
                                        <img src="" alt="?" />
                                        <span class="ps-2">{{ student.student__first_name }}</span>
                                      </td>
                                      <td> {{ student.student__last_name }} </td>
                                      <input type="hidden" name="students_id" id="student_id" value="{{student.student__id}}"/>
                                      <td>
                                        <div class="form-group">
                                          <select name="iscome" class="form-control form-control-sm" style="color: #fff;" id="exampleFormControlSelect3">
                                            {% if student.is_come %}
                                              <option value="true" selected style="background-color: green;">Keldi</option>
                                              <option value="false">Kelmadi</option>
                                            {% else %}
                                              <option value="false" selected >Kelmadi</option>
                                              <option value="true" >Keldi</option>
                                            {% endif %}
                                          </select>
                                        </div>
                                      </td>
                                      <td> 
                                        <div class="form-group">
                                          <select name="h_w_percentage" class="form-control form-control-sm" style="color: #fff;" id="exampleFormControlSelect3">
                                            <option value="{{ student.h_m_percentage }}" selected >{{ student.h_m_percentage }}</option>
                                            <option value="1" >1</option>
                                            <option value="2" >2</option>
                                            <option value="3" >3</option>
                                            <option value="4" >4</option>
                                            <option value="5" >5</option>
                                            <option value="6" >6</option>
                                            <option value="7" >7</option>
                                            <option value="8" >8</option>
                                            <option value="9" >9</option>
                                            <option value="10" >10</option>
                                          </select>
                                        </div>
                                      </td> 
                                      {% if student.student__student_type == 'online' %}
                                        <td> <label class="badge badge-danger">Online</label></td>
                                      {% elif student.student__student_type == 'offline' %}
                                        <td> <label class="badge badge-info">Offline</label></td>
                                      {% endif %}
                                    </tr>
                                  {% endfor %}
                                </tbody>
                              </table>
                              <br>
                              {% if lesson.status == 'started' %}
                                <input type="hidden" name="page" value="lesson">
                                <input type="hidden" name="lesson_id" value="{{ lesson.id }}">
                                <input type="hidden" name="method" value="create_attendency">
                                <button type="submit" class="btn btn-warning btn-fw">Saqlash</button>
                              {% else %}
                                <input type="hidden" disabled name="page" value="lesson">
                                <input type="hidden" disabled name="lesson_id" value="{{ lesson.id }}">
                                <input type="hidden" disabled name="method" value="create_attendency">
                                <button type="submit" disabled class="btn btn-warning btn-fw">Saqlash</button>
                              {% endif %}
                              
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% endif %}
            
          </div>
          <!-- content-wrapper ends -->
        </div>
        <!-- main-panel ends -->
      
      
      
      
      </div>
      <!-- page-body-wrapper ends -->
    </div>

    {% endblock content %}